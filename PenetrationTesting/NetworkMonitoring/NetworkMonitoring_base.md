- [网络监听技术 #](#%E7%BD%91%E7%BB%9C%E7%9B%91%E5%90%AC%E6%8A%80%E6%9C%AF)
  - [概述 ##](#%E6%A6%82%E8%BF%B0)
    - [网卡 ###](#%E7%BD%91%E5%8D%A1)
  - [共享式环境的网络监听 ##](#%E5%85%B1%E4%BA%AB%E5%BC%8F%E7%8E%AF%E5%A2%83%E7%9A%84%E7%BD%91%E7%BB%9C%E7%9B%91%E5%90%AC)
  - [交换式环境的网络监听 ##](#%E4%BA%A4%E6%8D%A2%E5%BC%8F%E7%8E%AF%E5%A2%83%E7%9A%84%E7%BD%91%E7%BB%9C%E7%9B%91%E5%90%AC)
    - [端口镜像 ###](#%E7%AB%AF%E5%8F%A3%E9%95%9C%E5%83%8F)
    - [MAC 洪泛 ###](#mac-%E6%B4%AA%E6%B3%9B)
    - [端口盗用 ###](#%E7%AB%AF%E5%8F%A3%E7%9B%97%E7%94%A8)
    - [ARP 欺骗 ###](#arp-%E6%AC%BA%E9%AA%97)

# 网络监听技术 #

## 概述 ##

网络监听指监视网络状态、网络通信数据流向以及通信具体内容；

用于网络监听的工具称为嗅探器（sniffer），嗅探器工作在网络环境中的底层，能够拦截网络中的通信数据，通过相应的处理程序实时分析通信的具体内容，进而掌握网络的整体布局和状态；

### 网卡 ###

网卡，即网络接口卡（Network Interface Card，NIC），用于实习计算机和网络电缆间的物理连接，为计算机之间的通信提供物理通道；

网卡工作在数据链路层，其地址称为 MAC 地址/硬件地址；

- 网卡工作模式
	- 单播/广播
	当数据帧到达 NIC 时，在正常情况下，网卡读入数据帧，然后检查帧头中的 MAC 地址字段，若目的 MAC 与本机 MAC 地址或广播地址相同，则产生中断信号通知操作系统进行相应处理，否则会 drop 数据帧；

	- 混杂模式（Promiscuous）
	当 NIC 处于 Promiscuous 模式时，对接收到的数据帧不会检查帧头信息，而是一律产生硬件中断，通知操作系统进行处理；    
	将主机 NIC 配置为 Promiscuous 模式是实施网络监听的前提条件；


网络监听除与 NIC 的工作模式有关，还与主机所处的网络环境相关，网络环境一般分为共享式网络环境和交换式网络环境；

## 共享式环境的网络监听 ##

- 共享式环境是指同一网段中的所有网络接口都能访问在物理媒体上传输的数据；

- 以太网是典型的共享式网络环境；
依据 CSMA/CD 协议，当一台主机发送数据时，所以后主机都能接收到其发送的数据；   
每台主机在发送数据前必须检测总线是否空闲，如果发现其它主机在发送数据，将进行等待，确认总线空闲后才能发送数据；   
集线器是以太网中的重要设备，它可以看作是 LAN 中共享的**广播**信道；

- 当处于共享式环境时，只需将 NIC 设置为 Promiscuous 模式，即可不丢弃获取到的数据帧，进而进行分析处理，达到监听的目的；


## 交换式环境的网络监听 ##

- 交换式环境一般指的是使用交换机的网络环境；

- 交换机是使用最广泛的 LAN 连接设备，与 HUB 最大的区别在于交换机上的通信数据不再需要向网络连接设备的所有端口进行转发，而是精确发往目标 MAC 主机所在的端口；

- 当处于交互式网络环境中时，即便主机 NIC 处于 Promiscuous 模式了，主机无法在正常情况下获取发往其它主机的数据帧，因此，需要采取一定的手段来达到监听目的；

### 端口镜像 ###



### MAC 洪泛 ###



### 端口盗用 ###




### ARP 欺骗 ###






























































































































