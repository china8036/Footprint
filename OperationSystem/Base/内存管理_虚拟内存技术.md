- [内存管理：虚拟内存技术](#内存管理虚拟内存技术)
  - [1. 基本概念](#1-基本概念)
  - [2. 页面置换算法](#2-页面置换算法)
    - [2.1. FIFO 算法](#21-fifo-算法)
    - [2.2. OPT(MIN) 算法](#22-optmin-算法)
    - [2.3. LRU(Least-Recently-Used) 算法](#23-lruleast-recently-used-算法)
  - [3. 存在问题](#3-存在问题)
    - [3.1. 内存抖动现象](#31-内存抖动现象)
    - [3.2. Belady 现象](#32-belady-现象)
  - [4. Refer Links](#4-refer-links)

# 内存管理：虚拟内存技术

## 1. 基本概念

![image](http://otaivnlxc.bkt.clouddn.com/jpg/2018/10/8/3c668571612a168300b951233322f049.jpg)

> 缺页中断指的是当软件试图访问已映射在虚拟地址空间中，但是目前并未被加载在物理内存中的一个分页时，**由中央处理器的内存管理单元 (MMU)**所发出的中断。

## 2. 页面置换算法

### 2.1. FIFO 算法

先入先出，即淘汰最早调入的页面。

### 2.2. OPT(MIN) 算法

选未来最远将使用的页淘汰，是一种最优的方案，可以证明缺页数最小。

可惜，MIN 需要知道将来发生的事，只能在理论中存在，实际不可应用。

### 2.3. LRU(Least-Recently-Used) 算法

用过去的历史预测将来，选最近最长时间没有使用的页淘汰（也称**最近最少使用**）。

LRU 准确实现：计数器法，页码栈法。

由于代价较高，通常不使用准确实现，而是采用近似实现，例如 Clock 算法。

## 3. 存在问题

### 3.1. 内存抖动现象

页面的频繁更换，导致整个系统效率急剧下降，这个现象称为内存抖动（或颠簸）。抖动一般是内存分配算法不好，内存太小引或者程序的算法不佳引起的。

### 3.2. Belady 现象

对有的页面置换算法，页错误率可能会随着分配帧数增加而增加。

FIFO 会产生 Belady 异常。

栈式算法无 Belady 异常，LRU，LFU（最不经常使用），OPT 都属于栈式算法。

## 4. Refer Links

TODO:

[Linux 内存管理与 Windows 内存管理](https://www.zhihu.com/question/20007201)

[作业在执行中发生了缺页中断，经系统将该缺页调入内存后，应继续执行？](https://www.nowcoder.com/questionTerminal/cec018fa63324ee5a7adacd78b56eb32?orderByHotValue=1&mutiTagIds=607&page=1&onlyReference=false)

[内存寻址](https://liam0205.me/2016/05/01/Introduction-to-Memory-Addressing/)

[程序员的自我修养（七）：内存缺页错误](https://liam0205.me/2017/09/01/page-fault/)
