- [Data Operation](#data-operation)
  - [1. less](#1-less)
  - [2. more](#2-more)
  - [3. tail](#3-tail)
  - [5. awk](#5-awk)
  - [6. sed](#6-sed)
  - [7. sort](#7-sort)
  - [8. uniq](#8-uniq)
  - [9. cut](#9-cut)
  - [10. paste](#10-paste)
  - [11. join](#11-join)
  - [12. shuf](#12-shuf)
  - [13. hd](#13-hd)
  - [14. bvi](#14-bvi)
  - [15. strings](#15-strings)
  - [16. iconv](#16-iconv)
  - [17. uconv](#17-uconv)
  - [18. split](#18-split)
  - [19. csplit](#19-csplit)
  - [20. Refer Links](#20-refer-links)

# Data Operation

## 1. less

## 2. more

## 3. tail

tail 用于显示指定文件的末尾内容，不指定文件时，作为输入信息进行处理，常用来查看日志文件。使用 tailf 命令可代替 `tail -f`。

Options:
- -f 循环读取
- -q 不显示处理信息
- -v 显示详细的处理信息
- -c + 数目 要显示的字节数
- -n + 行数 要显示的行数，默认是 10 行
- --pid=PID 与 -f 合用，表示在进程 PID 死掉之后结束
- -s, --sleep-interval=S 与 -f 合用，表示在每次反复的间隔休眠 S 秒 

tldr:
```
  tail
  Display the last part of a file.

  - Show last 'num' lines in file:
    tail -n num file

  - Show all file since line 'num':
    tail -n +num file

  - Show last 'num' bytes in file:
    tail -c num file

  - Keep reading file until Ctrl + C:
    tail -f file

  - Keep reading file until Ctrl + C, even if the file is rotated:
    tail -F file
```

## 5. awk

awk 是一种处理文本文件的语言，是一个强大的文本分析工具，其效率比脚本语言（如 python）更高。

awk 的命令来源是取了三位创始人 Alfred Aho，Peter Weinberger, 和 Brian Kernighan 的 Family Name 的首字符。

Usage:
```
awk [options] 'script' var=value file(s)
awk [options] -f scriptfile var=value file(s)
```

Script:
- 条件
  - 关系表达式：如 x>10、x<=10、$3>2 && $3 <5。
  - 预定义条件：BEGIN/END 匹配文件开头和末尾、pattern 匹配指定列
  - 正则表达式（ERE）：/regex/
- 动作 
  - 格式化输出
    - printf
    - print（自带、n）
  - 流程控制
- 预定义变量
  - $n: 当前记录的第 n 个字段（$0 表示每条记录的整行）
  - FS: 字段分隔符（默认是空白符）
  - FILENAME: 当前文件名
  - NF: 字段数（列数）
  - NR: 记录数（当前行号）
- 其它参数
  - -F 指定分隔符，相当于`{FS="xxx"}`
  - -f 从脚本文件中读取 awk 命令
  - -v 将外部变量传递给 awk，如`-v var=value`

工作原理：
1. 执行 BEGIN{command} 语句块。
1. 从 stdin 中读取一行记录，将该记录按分隔符分割并赋值给 $n，在执行 pattern{action}。
1. 重复上一步操作直到 stdin 为空。
1. 执行 END{command} 语句块。

tldr:
```
  awk
  A versatile programming language for working on files.

  - Print the fifth column (a.k.a. field) in a space-separated file:
    awk '{print $5}' filename

  - Print the second column of the lines containing "something" in a space-separated file:
    awk '/something/ {print $2}' filename

  - Print the last column of each line in a file, using a comma (instead of space) as a field separator:
    awk -F ',' '{print $NF}' filename

  - Sum the values in the first column of a file and print the total:
    awk '{s+=$1} END {print s}' filename

  - Sum the values in the first column and pretty-print the values and then the total:
    awk '{s+=$1; print $1} END {print "--------"; print s}' filename

  - Print every third line starting from the first line:
    awk 'NR%3==1' filename
```

eg:
```
awk '{x+=$3} END{print x}' # 求第 3 列之和
awk 'BEGIN{FS=":";printf "head\n"} $2>60{printf "$1: $2"}' filename
awk 'match($1, "[a-z]*"){printf "xxx"}' fliename # 通过 match 函数使用正则匹配
awk '/[a-z]*/{printf "xxx"}' filename # 对每一行的整行做正则匹配
awk '$3 ~ /regex/{action}' filename # 对每一行的指定字段做正则匹配，`~`表示匹配，`!~`表示不匹配
```

## 6. sed

sed 是一个轻量的面向流的编辑器（每次只读取1行到缓冲区中）。sed 可依照 script 的指令，来自动编辑一个或多个文本文件，简化对文件的反复操作，编写转换程序等。

Usage:
```
sed [-hnV](-e <script>)[-f<script 文件》] + filename
```

Options:
- -e script 或 --expression=script 以选项中指定的 script 来处理输入的文本文件。
- -f script 文件或 --file=script 文件 以选项中指定的 script 文件来处理输入的文本文件。
- -n 或 --quiet 或 --silent 仅显示 script 处理后的结果。

Script: TODO:
- Syna:
- Action:

tldr:
```
  sed
  Edit text in a scriptable manner.                                                                             
  - Replace the first occurrence of a string in a file, and print the result:                                   
    sed 's/find/replace/' filename                                                                              
  - Replace all occurrences of an extended regular expression in a file:                                        
    sed -r 's/regex/replace/g' filename                                                                         
  - Replace all occurrences of a string in a file, overwriting the file (i.e. in-place):                        
    sed -i 's/find/replace/g' filename                                                                          
  - Replace only on lines matching the line pattern:                                                            
    sed '/line_pattern/s/find/replace/' filename                                                                
  - Print only text between n-th line till the next empty line:                                                 
    sed -n 'line_number,/^$/p' filename                                                                         
  - Apply multiple find-replace expressions to a file:                                                          
    sed -e 's/find/replace/' -e 's/find/replace/' filename                                                      
  - Replace separator / by any other character not used in the find or replace patterns, e.g., #:               
    sed 's#find#replace#' filename
```

## 7. sort

## 8. uniq

uniq 命令用于检查及删除文本文件中**连续出现**的相同记录。

```
uniq [-cdu] (-f【栏位】) [-s【字符位置】] (-w【字符位置】) [--help] (--version) 【输入文件】（输出文件)
```
参数：
- -c 或 --count 在每列旁边显示该行重复出现的次数。
- -d 或 --repeated 仅显示重复出现的行列。
- -f【栏位】或 --skip-fields=【栏位】 忽略比较指定的栏位。
- -s【字符位置】或 --skip-chars=【字符位置】 忽略比较指定的字符。
- -u 或 --unique 仅显示出一次的行列。
- -w【字符位置】或 --check-chars=【字符位置】 指定要比较的字符。
- --help 显示帮助。
- --version 显示版本信息。
- 『输入文件』 指定已排序好的文本文件。
- 『输出文件』 指定输出的文件。

NOTE
- 对文本操作时，它一般会和 sort 命令进行组合使用，因为 uniq 不会检查重复的行，除非它们是相邻的行。如果您想先对输入排序，使用 sort -u。
- 对文本操作时，若域中先为空字符（通常包括空格以及制表符)，然后非空字符，域中字符前的空字符将被跳过。

tldr:
- 去除重复的行后显示（最常用）
  ```
  ╭─firejq@firejqwei-PC0 ~  
  ╰─$ uniq -u test     
  i am tank  
  this is a test  
  whom have a try  
  WhoM have a try  
  you  have a try  
  i want to abroad  
  those are good men  
  we are good men  
  ``` 
- 只显示重复的行
  ```
  ╭─firejq@firejqwei-PC0 ~  
  ╰─$ uniq -d test 
  this is a test  
  i love tank  
  ```
- 在每列旁边显示该行重复出现的次数
  ```
  ╭─firejq@firejqwei-PC0 ~  
  ╰─cat test                                                                                                                                                    
  this is a test  
  i am tank  
  i love tank  
  this is a test  
  whom have a try  
  WhoM have a try  
  you  have a try  
  i want to abroad  
  those are good men  
  we are good men  

  ╭─firejq@firejqwei-PC0 ~  
  ╰─uniq -c test                                                                                                                                               
        3 this is a test  
        1 i am tank  
        2 i love tank  
        1 this is a test  
        1 whom have a try  
        1 WhoM have a try  
        1 you  have a try  
        1 i want to abroad  
        1 those are good men  
        1 we are good men  
  ```
  我们可以看出，uniq 在检查重复行的时候，只会检查相邻的行。因此，可先对文本进行排序，然后再使用 uniq。

- 忽略第 1 列
  ```
  ╭─firejq@firejqwei-PC0 ~  
  ╰─$ uniq -f 1 test
  this is a test  
  i am tank  
  i love tank  
  this is a test  
  whom have a try  
  you  have a try  
  i want to abroad  
  those are good men
  ```
- 忽略大小写
  ```
  ╭─firejq@firejqwei-PC0 ~  
  ╰─uniq -i test                                                                                                                                                
  this is a test  
  i am tank  
  i love tank  
  this is a test  
  whom have a try  
  you  have a try  
  i want to abroad  
  those are good men  
  we are good men
  ```
- 不考虑前 4 个字符
  ```
  ╭─firejq@firejqwei-PC0 ~  
  ╰─$ uniq -s 4 test -c
        3 this is a test  
        1 i am tank  
        2 i love tank  
        1 this is a test  
        3 whom have a try  
        1 i want to abroad  
        1 those are good men  
        1 we are good men
  ```

## 9. cut

## 10. paste

## 11. join

## 12. shuf

## 13. hd

## 14. bvi

## 15. strings

## 16. iconv

## 17. uconv

## 18. split

## 19. csplit

## 20. Refer Links
todo:
[Coolshell SED 简明教程](https://coolshell.cn/articles/9104.html)

[Coolshell AWK 简明教程](https://coolshell.cn/articles/9070.html)

[Coolshell 应该知道的 LINUX 技巧](https://coolshell.cn/articles/8883.html)

[Runoob Linux awk 命令](http://www.runoob.com/linux/linux-comm-awk.html)

[Runoob Linux sed 命令](http://www.runoob.com/linux/linux-comm-sed.html)

[实例详细说明 linux 下去除重复行命令 uniq](http://blog.51yip.com/shell/1022.html)

[shell 中 uniq 与 sort -u 两种去重的对别](https://blog.csdn.net/halou90/article/details/50312307)