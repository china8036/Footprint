- [计划任务](#计划任务)
  - [1. 单次计划任务](#1-单次计划任务)
    - [1.1. at](#11-at)
    - [1.2. atq](#12-atq)
  - [2. 循环定时任务](#2-循环定时任务)
    - [2.1. crontab](#21-crontab)
    - [2.2. /etc/crontab 文件](#22-etccrontab-文件)
    - [2.3. /etc/cron 目录](#23-etccron-目录)
    - [2.4. anacron](#24-anacron)
  - [3. watch](#3-watch)
  - [4. Refer Links](#4-refer-links)

# 计划任务

## 1. 单次计划任务

### 1.1. at

### 1.2. atq

## 2. 循环定时任务

服务：`/etc/inti.d/cron start`

### 2.1. crontab

crontab 命令用于设置循环定时任务，这种方式设置的任务与当前用户绑定。

Options:
- `-e`: 进行 vim 编辑
- `-l`: 列出所有定时任务
- `-r`: 删除当前用户的所有定时任务

任务格式：
```
minute hour day month week task_command
```
其中：
- minute 表示分钟，可取 0-59。
- hour 表示小时，可取 0-23。
- day 表示几号，可取 1-31。
- month 表示几月，可取 1-12。
- week 表示周几，可取 0-7（其中 0 和 7 都表示 Sunday）。
- task_command 表示要执行的命令。若有多条命令，须用 `;` 进行分隔，并且使用小括号 `()` 把整个 task_command 括起来。

时间的设置除具体取值外，可使用以下通配符：
- `*`: 表示任意时间
- `,`: 表示不连续时间
- `-`: 表示连续时间
- `*/n`: 表示每隔 n 个时间单位执行一次

e.g.
- `10 * * * * ./abc.sh` 每个小时的第 10 分钟执行一次 abc.sh。
- `0 0 1,15 * 1 command` 每周一，以及每个月的 1 号和 15 号执行命令（**时间设置项之间是“或”的关系，而不是“且”的关系**）。
- `* 5 * * * command` 每天 5 点的每一分钟执行一次（每天一共执行 60 次）。
- `0 5 * * * command` 每天 5 点执行一次（每天一共执行 1 次）。

NOTE:
- 在设置任务的 task command 时，最好都使用绝对路径。
- cron 配置文件：
  - 全局配置文件：`/etc/crontab`
  - 用户配置文件：`/var/spool/cron/username`
- 配置文件一旦保存就立即生效，不用重新加载。

### 2.2. /etc/crontab 文件

<!-- TODO: -->

直接将定时任务写到 /etc/crontab 文件也可以设置循环定时任务，这种方式设置的任务与系统绑定，但需要指定用户。

### 2.3. /etc/cron 目录

<!-- TODO: -->

将要定时执行的脚本文件 copy 到 /etc/cron 目录下的 daily、weekly、monthly 目录中的任意一个，也可以设置循环定时任务。

### 2.4. anacron

anacron 命令与 crontab 命令的区别在于，anacron 命令可以保证关机时错误的定时任务可在开机之后马上执行。

## 3. watch

## 4. Refer Links