- [计算机视觉：数字图像基础](#计算机视觉数字图像基础)
  - [1. 图像域](#1-图像域)
  - [2. 图像尺寸与分辨率](#2-图像尺寸与分辨率)
  - [3. 像素值](#3-像素值)
  - [4. 图像文件格式](#4-图像文件格式)
    - [4.1. TIFF](#41-tiff)
    - [4.2. GIF](#42-gif)
    - [4.3. PNG](#43-png)
    - [4.4. JPEG](#44-jpeg)
    - [4.5. JFIF](#45-jfif)
    - [4.6. EXIF](#46-exif)
    - [4.7. BMP](#47-bmp)
    - [4.8. PBM](#48-pbm)
  - [5. 直方图](#5-直方图)
  - [6. 点运算](#6-点运算)
  - [7. 滤波器](#7-滤波器)
  - [8. 边缘与轮廓](#8-边缘与轮廓)
  - [9. 色彩空间](#9-色彩空间)
    - [9.1. RGB](#91-rgb)
    - [9.2. HSL/HSV/HSB](#92-hslhsvhsb)
  - [10. 图像变换](#10-图像变换)
    - [10.1. 离散傅里叶变换 (Discrete Fourier Transform, DFT)](#101-离散傅里叶变换-discrete-fourier-transform-dft)
    - [10.2. 离散余弦变换 (Discrete Cosine Transform, DCT)](#102-离散余弦变换-discrete-cosine-transform-dct)
    - [10.3. 离散小波变换 (Discrete Wavelet Transform, DWT)](#103-离散小波变换-discrete-wavelet-transform-dwt)
  - [11. Refer Links](#11-refer-links)

# 计算机视觉：数字图像基础

## 1. 图像域

TODO: [两张张图让你明白时域， 频域和傅里叶变换](https://blog.csdn.net/liwenlong_only/article/details/80535835)

- 空间域 / 空域 / 像素域 / 图像空间 (spatial domain)

  空间域是由图像像素组成的空间，在空间域中**以长度（距离）为自变量**直接对每个像素进行处理称为空（间）域处理，空域处理是在像素级的处理，如在像素级的图像叠加。

  **通过离散傅立叶变换或小波变换可以将图像由空域转换到频域，表示图像的能量梯度**。

- 时间域 / 时域

  时域是描述数学函数或物理信号对时间的关系，**以时间为自变量**。例如一个信号的时域波形可以表达信号随着时间的变化，横轴是时间，纵轴是信号的变化。

  在图像处理中，视频可以认为是时域上的图像序列构成，图片可以认为是时域上的单幅图像。

  **时域通过离散傅立叶变换或小波变换可以将图像由时域转换到频域，表示图像的能量梯度**。

- 频率域 / 频域 (frequency domain)

  频域是描述信号在频率方面特性时用到的一种坐标系，它**以频率（即波数) 为自变量**描述图像的特征，可以将一幅图像的所有像素在空间上的变化分解为具有不同振幅、空间频率和相位的简振函数的线性叠加。图像中各种频率成分的组成和分布称为空间频谱。这种对图像的频率特征进行分解、处理和分析称为频率域处理或波数域处理。

  自变量是频率，即横轴是频率，纵轴是该频率信号的幅度，也就是通常说的频谱图。频谱图描述了信号的频率结构及频率与该频率信号幅度的关系。

  频率域处理主要用于与图像空间频率有关的处理中。如图像恢复、图像重建、辐射变换、边缘增强、图像锐化、图像平滑、噪声压制、频谱分析、纹理分析等处理和分析中。

空域、频域在图像增强上的应用：

![image](http://img.cdn.firejq.com/jpg/2019/3/26/5a0d0b43ed89c8280995c035cf50d22b.jpg)

P.S. 在频域中进行滤波处理时：
- 低通滤波保留图像中的低频分量而除去高频分量；高通滤波保留图像中的高频分量而除去低频分量。
- 图像的细节部分对应的是频域的高频部分，如边缘分界处；图像的轮廓对应的是频域的低频部分。因此，要留下轮廓的话应该去掉高频，结果是图像被模糊了；而噪声一般是白点或者黑点，大部分是高频，因此一般会对信号先进行低通滤波处理即过滤掉高频部分，留下低频。

## 2. 图像尺寸与分辨率

- 一幅图像的尺寸可以直接由图像矩阵 I 的宽度（列数）和高度（行数）确定。

- 一幅图像的分辨率指定了它在真实世界中的空间尺寸，由每个计量单位的图像元素数给出。

- 位深度是指用语表示单个颜色的位数，不是表示整个图像所需的位数。如：一幅 8 位深度的 RGB 编码彩色图像每个通道需要 8 位，总共需要 24 位，而具有 12 位深度的相同图像总共需要 36 位。

## 3. 像素值

像素值实际上是长度为 k 的二进制字，因此一个像素可以表示 2^k 种不同的值。k 值由图像的位深度决定，通常是处理器的字长。

一个单独像素的位数取决于图像的种类：
- 灰度图像

  一幅灰度图像的图像数据由代表图像强度、亮度、密度的单个通道构成。

- 二值图像

  二值图像是一种特殊的灰度图像，其像素只能取两种值中的一种。

- 彩色图像

  大多数彩色图像包含红、绿、蓝（RGB）三种基色，并且通常每个分量使用 8 位。在这些彩色图像中，每个像素需要 3x8=24 位来编码所有的三个分量，每个单独分量的范围是 [0……255]。

- 特殊图像

  特殊图像是指那些用常见的标准格式不足以表示其图象值的图像。如：具有负值的图像（会在例如曲线检测等的图像处理过程中产生）和具有浮点型值的图像（会在诸如天文学和医学的应用中见到）。

## 4. 图像文件格式

光栅数据图像：以离散坐标排列在规则矩阵中的像素值所构成的图像。

矢量数据图像：以连续坐标的几何对象所构成的图像；要在显示器或打印机等物理设备上显示矢量数据图像，就必须要先将其光栅化。

### 4.1. TIFF

标签图像文件格式（Tagged Image File Format，简写为 TIFF）是一种灵活的位图格式，为了满足不同领域专业需求而设计。

TIFF 格式支持灰度、索引、真彩色图像。

通过在文件标头中使用“标签”，它能够在一个文件中处理多幅图像和数据。标签能够标明图像的如图像大小这样的基本几何尺寸，或者定义图像数据是如何排列的，或者是否使用了各种各样的图像压缩选项。

与 JPEG 不同，TIFF 文件可以编辑然后重新存储而不会有压缩损失。其它的一些 TIFF 文件选项包括多层或者多页。

### 4.2. GIF

图像互换格式（GIF，Graphics Interchange Format）是一种位图图形文件格式，以 8 位色（即 256 种颜色）重现真彩色的图像。它实际上是一种压缩文档，采用 LZW 压缩算法进行编码，有效地减少了图像文件在网络上传输的时间。它是目前广泛应用于网络传输的图像格式之一。

GIF 实质上是一种索引图像文件格式，是为最大深度是 8 位的彩色和灰度图像而设计的，因此它不支持真彩色图像。

- 优点：
  - 优秀的压缩算法使其在一定程度上保证图像质量的同时将体积变得很小。
  - 可插入多帧，从而实现动画效果。
  - 可设置透明色以产生对象浮现于背景之上的效果。
- 缺点：
  - 由于采用了 8 位元压缩，最多只能处理 256 种颜色，故不宜应用于真彩色图片。

### 4.3. PNG

便携式网络图形（Portable Network Graphics，PNG）是一种无损压缩的位图图形格式，支持索引、灰度、RGB 三种颜色方案以及 Alpha 通道等特性。PNG 的开发目标是改善并取代 GIF 作为适合网络传输的格式而不需专利许可，所以被广泛应用于互联网及其他方面上。

PNG 图像通过一种 PKZIP 方法的变体来支持无损压缩，但不支持有损压缩。

目前，PNG 是在互联网上用于表示未压缩的、无损的、真彩色图像的最佳选择。

### 4.4. JPEG

JPEG(Joint Photographic Experts Group，联合图像专家小组) 格式定义了一种用于连续的灰度或彩色图像的压缩方法，目前是最广泛使用的图像文件格式。

JPEG 支持多达 256 种颜色分量的图像。

### 4.5. JFIF

JPEG 文件交换格式（JPEG File Interchange Format，JFIF）是一个图像文件格式标准。它是一种交换符合 JPEG 交换格式（JIF）标准的 JPEG 编码文件的格式。它解决了 JIF 在简单 JPEG 编码文件交换方面的一些限制。与所有符合 JIF 的文件一样，JFIF 文件中的图像数据使用 JPEG 标准的技术压缩，因此 JFIF 有时被称为“JPEG/JFIF”。

### 4.6. EXIF

可交换图像文件格式常被简称为 Exif（Exchangeable image file format），是专门为数码相机的照片设定的，可以记录数码照片的属性信息和拍摄数据。

### 4.7. BMP

BMP 取自位图 BitMaP 的缩写，也称为 DIB（与设备无关的位图），是微软视窗图形子系统（Graphics Device Interface）内部使用的一种位图图形格式，它是微软视窗平台上的一个简单的图形文件格式。

BMP 格式支持灰度、索引、真彩色图像。

由于每个像素都用一整个字节来存储，所以这种方式并不高效。

BMP 是一种灵活性很低的格式。

### 4.8. PBM

可移植像素图格式（PPM），可移植灰度图格式（PGM）和可移植位图格式（PBM）是便于跨平台的图像格式。有时候也被统称为 PNM 格式。

该图像格式的特点是可以有选择的存储为人类可读的文本格式。

## 5. 直方图

是否可以仅通过直方图来重建一幅图像呢，即直方图是否可以以某种方式逆转？在非特殊情况下，答案是否定的。

从直方图种可以获取的信息：
- 曝光程度
- 对比度
- 图像缺陷
  - 饱和度
  - 峰值和间隙
  - 图像压缩的影响
- 动态范围

## 6. 点运算

## 7. 滤波器

## 8. 边缘与轮廓

## 9. 色彩空间

### 9.1. RGB

RGB 是基于色光混合的原理设计的，是一种以硬件为导向的色彩模型，它描述了显示器的电子枪打在 Red 红、Green 绿、Blue 蓝三色发光极上的显色方式。当红绿蓝三色光的亮度均为最大值 (255) 的时候，屏幕上重现的颜色就是最亮的白色，都为 0 的时候，结果就是黑色。

### 9.2. HSL/HSV/HSB

RGB 是对机器很友好的色彩模式，但并不够人性化，因为我们对色彩的认识往往是”什么颜色？鲜艳不鲜艳？亮还是暗？”。而 HSL 模式和 HSV(HSB) 都是基于 RGB 的，是作为一个更方便友好的方法创建出来的。

HSL 和 HSV 二者都把颜色描述在圆柱坐标系内的点，这个圆柱的中心轴取值为自底部的黑色到顶部的白色而在它们中间的是灰色，绕这个轴的角度对应于“色相”，到这个轴的距离对应于“饱和度”，而沿着这个轴的高度对应于“亮度”，“色调”或“明度”。

HSL 同样使用了 3 个分量来描述色彩，与 RGB 使用的三色光不同，HSL 色彩的表述方式是：
- H(hue) 色相 / 色调。
- S(saturation) 饱和度 / 纯度。
- L(lightness) 明度 / 亮度。

在 HSL 中：
- H(hue) 分量，代表的是人眼所能感知的颜色范围，这些颜色分布在一个平面的色相环上，取值范围是 0°到 360°的圆心角，每个角度可以代表一种颜色。色相值的意义在于，我们可以在不改变光感的情况下，通过旋转色相环来改变颜色。在实际应用中，我们需要记住色相环上的六大主色，用作基本参照：360°/0°红、60°黄、120°绿、180°青、240°蓝、300°洋红，它们在色相环上按照 60°圆心角的间隔排列，如下图：

  ![image](http://img.cdn.firejq.com/jpg/2019/3/25/e1c7f6acb9bb2e0124490cef21166aab.jpg)

- S(saturation) 分量，指的是色彩的饱和度，它用 0% 至 100% 的值描述了相同色相、明度下色彩纯度的变化。数值越大，颜色中的灰色越少，颜色越鲜艳，呈现一种从理性（灰度) 到感性（纯色) 的变化，如下图：

  ![image](http://img.cdn.firejq.com/jpg/2019/3/25/3e3bbb6741861a5dc77f3d6311289dde.jpg)

- L(lightness) 分量，指的是色彩的明度，作用是控制色彩的明暗变化。它同样使用了 0% 至 100% 的取值范围。数值越小，色彩越暗，越接近于黑色；数值越大，色彩越亮，越接近于白色，如下图：

  ![image](http://img.cdn.firejq.com/jpg/2019/3/25/2a99bccd2ce747e539db5b3dd3837956.jpg)

## 10. 图像变换

### 10.1. 离散傅里叶变换 (Discrete Fourier Transform, DFT)

[百度百科：离散傅里叶变换](https://baike.baidu.com/item/%E7%A6%BB%E6%95%A3%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2)

[知乎：如何通俗地解释什么是离散傅里叶变换？](https://www.zhihu.com/question/21314374)

TODO:

[十、从头到尾彻底理解傅里叶变换算法、上](https://blog.csdn.net/v_JULY_v/article/details/6196862)

[十、从头到尾彻底理解傅里叶变换算法、下](https://blog.csdn.net/v_JULY_v/article/details/6200945)

对一段有限长的离散信号，离散傅里叶变换（DFT）可以找出它含有的各个频率的正弦波分量。

![image](http://img.cdn.firejq.com/jpg/2019/3/31/b7e0a6bb28180fe045001ffb06d9758f.jpg)

离散傅里叶变换（DFT），是傅里叶变换在时域和频域上都呈现离散的形式，将时域信号的采样变换为在离散时间傅里叶变换（DTFT）频域的采样。在形式上，变换两端（时域和频域上）的序列是有限长的，而实际上这两组序列都应当被认为是离散周期信号的主值序列。即使对有限长的离散信号作 DFT，也应当将其看作经过周期延拓成为周期信号再作变换。在实际应用中通常采用快速傅里叶变换以高效计算 DFT。

在图像处理中，图像的频率是表征图像中灰度变化剧烈程度的指标，是灰度在平面空间上的梯度。如：大面积的沙漠在图像中是一片灰度变化缓慢的区域，对应的频率值很低；而对于地表属性变换剧烈的边缘区域在图像中是一片灰度变化剧烈的区域，对应的频率值较高。傅里叶变换在实际中有非常明显的物理意义，设 f 是一个能量有限的模拟信号，则其傅里叶变换就表示 f 的谱。从纯粹的数学意义上看，傅里叶变换是将一个函数转换为一系列周期函数来处理的。**从物理效果看，傅里叶变换是将图像从空间域转换到频率域，其逆变换是将图像从频率域转换到空间域。换句话说，傅里叶变换的物理意义是将图像的灰度分布函数变换为图像的频率分布函数，傅里叶逆变换是将图像的频率分布函数变换为灰度分布函数**。

傅里叶变换以前，图像（未压缩的位图）是由对在连续空间（现实空间）上的采样得到一系列点的集合，我们习惯用一个二维矩阵表示空间上各点，则图像可由 z=f(x,y) 来表示。由于空间是三维的，图像是二维的，因此空间中物体在另一个维度上的关系就由梯度来表示，这样我们可以通过观察图像得知物体在三维空间中的对应关系。为什么要提梯度？因为实际上对图像进行二维傅里叶变换得到频谱图，就是图像梯度的分布图，当然频谱图上的各点与图像上各点并不存在一一对应的关系，即使在不移频的情况下也是没有。傅里叶频谱图上我们看到的明暗不一的亮点，实际上图像上某一点与邻域点差异的强弱，即梯度的大小，也即该点的频率的大小（可以这么理解，图像中的低频部分指低梯度的点，高频部分相反）。一般来讲，梯度大则该点的亮度强，否则该点亮度弱。这样通过观察傅里叶变换后的频谱图，也叫功率图，我们首先就可以看出，图像的能量分布，如果频谱图中暗的点数更多，那么实际图像是比较柔和的（因为各点与邻域差异都不大，梯度相对较小），反之，如果频谱图中亮的点数多，那么实际图像一定是尖锐的，边界分明且边界两边像素差异较大的。对频谱移频到原点以后，可以看出图像的频率分布是以原点为圆心，对称分布的。将频谱移频到圆心除了可以清晰地看出图像频率分布以外，还有一个好处，它可以分离出有周期性规律的干扰信号，比如正弦干扰，一副带有正弦干扰，移频到原点的频谱图上可以看出除了中心以外还存在以某一点为中心，对称分布的亮点集合，这个集合就是干扰噪音产生的，这时可以很直观的通过在该位置放置带阻滤波器消除干扰。

### 10.2. 离散余弦变换 (Discrete Cosine Transform, DCT)

[百度百科：余弦变换](https://baike.baidu.com/item/%E4%BD%99%E5%BC%A6%E5%8F%98%E6%8D%A2)

[概述·离散余弦变换（DCT）及其实现过程](https://zhuanlan.zhihu.com/p/33845296)

1974年，K. R. Rao、N. Ahmed、T. Natarajan三位教授创立了离散余弦变换（Discrete Cosine Transform, DCT）。在数字信号、数字图像处理领域，离散余弦变换的效果能够接近理论上的最佳变换——Kahunen-Loeve变换（K-L变换）。

离散余弦变换 (Discrete Cosine Transform) 是与傅里叶变换类似的一种变换，相当于一个长度大概是它两倍的离散傅里叶变换且只使用实数，这个离散傅里叶变换是对一个实偶函数进行的，在有些变形里面需要将输入或者输出的位置移动半个单位 (DCT 有 8 种标准类型，其中 4 种是常见的)。

离散余弦变换经常被信号处理和图像处理使用，用于对信号和图像（包括静止图像和运动图像）进行有损数据压缩。这是由于**离散余弦变换具有很强的"能量集中"特性**，大多数的自然信号（包括声音和图像）的能量都集中在离散余弦变换后的低频部分，而且当信号具有接近马尔科夫过程 (Markov processes) 的统计特性时，离散余弦变换的去相关性接近于 K-L 变换（Karhunen-Loève 变换 -- 它具有最优的去相关性）的性能。例如，在静止图像编码标准 JPEG 中，在运动图像编码标准 MJPEG 和 MPEG 的各个标准中都使用了离散余弦变换。在这些标准制中都使用了二维的第二种类型离散余弦变换，并将结果进行量化之后进行熵编码。这时对应第二种类型离散余弦变换中的 n 通常是 8，并用该公式对每个 8x8 块的每行进行变换，然后每列进行变换。得到的是一个 8x8 的变换系数矩阵。其中 (0,0) 位置的元素就是直流分量，矩阵中的其他元素根据其位置表示不同频率的交流分量。

### 10.3. 离散小波变换 (Discrete Wavelet Transform, DWT)

[百度百科：离散小波变换](https://baike.baidu.com/item/%E4%BD%99%E5%BC%A6%E5%8F%98%E6%8D%A2#2)

TODO:

[知乎：能不能通俗的讲解下傅立叶分析和小波分析之间的关系？](https://www.zhihu.com/question/22864189)

对于频率随着时间变化的非平稳信号，傅里叶变换有局限性：

![image](http://img.cdn.firejq.com/jpg/2019/3/31/3ce6159c52d1691dde2f52d1ebb0a405.jpg)

傅里叶变换处理非平稳信号有天生缺陷。它只能获取一段信号总体上包含哪些频率的成分，但是对各成分出现的时刻并无所知，然而平稳信号大多是人为制造出来的，自然界的大量信号几乎都是非平稳的。

小波变换是一种新的变换分析方法，它将傅立叶变换中无限长的三角函数基换成了有限长的会衰减的小波基，这样不仅能够获取频率，还可以定位到时间了。傅里叶变换只能得到一个频谱，做小波变换却可以得到一个时频谱：

![image](http://img.cdn.firejq.com/jpg/2019/3/31/9b0d50d3005814251f975291e0d7747a.jpg)

![image](http://img.cdn.firejq.com/jpg/2019/3/31/0fba71de917d1dd9444dac9e8f416fd1.jpg)

小波变换继承和发展了短时傅立叶变换局部化的思想，同时又克服了窗口大小不随频率变化等缺点，能够提供一个随频率改变的“时间 - 频率”窗口，是进行信号时频分析和处理的理想工具。它的主要特点是通过变换能够充分突出问题某些方面的特征，能对时间（空间）频率的局部化分析，通过伸缩平移运算对信号（函数）逐步进行多尺度细化，最终达到高频处时间细分，低频处频率细分，能自动适应时频信号分析的要求，从而可聚焦到信号的任意细节，解决了 Fourier 变换的困难问题，成为继 Fourier 变换以来在科学方法上的重大突破。

在应用领域，特别是在信号处理、图像处理、语音处理以及众多非线性科学领域，小波变换被认为是继 Fourier 分析之后的又一有效的时频分析方法。小波变换与 Fourier 变换相比，是一个时间和频域的局域变换因而能有效地从信号中提取信息，通过伸缩和平移等运算功能对函数或信号进行多尺度细化分析（Multiscale Analysis），解决了 Fourier 变换不能解决的许多困难问题。

## 11. Refer Links

《数字图像处理基础》（德）伯格 (Wilhelm Burger), （德）伯奇 (Mark J.Burge) 著；金名 等 译 清华大学出版社

[色生心中：人性化的 hsl 模型](http://cdc.tencent.com/2011/05/09/%E8%89%B2%E7%94%9F%E5%BF%83%E4%B8%AD%EF%BC%9A%E4%BA%BA%E6%80%A7%E5%8C%96%E7%9A%84hsl%E6%A8%A1%E5%9E%8B/ )

[为什么时域和空域的傅里叶变换都对应频域？如何从物理和数学的角度解释呢？](https://www.zhihu.com/question/300906713)

TODO:

[数字图像处理领域的二十四个典型算法及 vc 实现、第一章](https://blog.csdn.net/v_JULY_v/article/details/6210124)

[数字图像处理领域的二十四个典型算法及 vc 实现、第二章](https://blog.csdn.net/v_JULY_v/article/details/6227072)