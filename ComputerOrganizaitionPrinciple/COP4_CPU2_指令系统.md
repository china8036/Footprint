- [计算机组成原理：CPU - 指令系统 / 指令集](#计算机组成原理cpu---指令系统--指令集)
  - [1. 基本概念](#1-基本概念)
  - [2. 发展历史](#2-发展历史)
  - [3. 体系结构](#3-体系结构)
  - [4. 指令格式](#4-指令格式)
    - [4.1. 操作码](#41-操作码)
    - [4.2. 地址码](#42-地址码)
  - [5. 指令周期](#5-指令周期)
  - [6. Refer Links](#6-refer-links)

# 计算机组成原理：CPU - 指令系统 / 指令集

## 1. 基本概念

计算机的程序是由一系列机器指令组成的，指令就是要计算机执行某种操作的命令。

一台计算机中所有机器指令的集合，称为这台计算机的指令系统。

## 2. 发展历史

- 20世纪50年代，由于受器件限制，计算机的硬件结构比较简单。

- 20世纪60年代后期，指令数目多达一二百条，寻址方式也日趋多样化。

- 20世纪60年代后期出现了系列计算机。所谓系列计算机，是指基本指令系统相同、基本体系结构相同的一系列计算机，如Pentium系列。系列机解决了各机种的软件兼容问题，其必要条件是同一系列的各机种有共同的指令集，而且新推出的机种指令系统一定包含所有旧机种的全部指令。

- 20世纪70年代末期，计算机硬件结构随着VLSI技术的飞速发展，大多数计算机的指令系统多达几百条。我们称这些计算机为复杂指令系统计算机，简称**CISC**。但是如此庞大的指令系统不但使计算机的研制周期变长，难以保证正确性，不易调试维护，而且由于采用了大量使用频率很低的复杂指令而使硬件资源浪费，最常使用的简单指令仅占指令总数的20%，但却在程序中出现的频率为80%。为此人们又提出了便于VLSI技术实现的精简指令系统计算机，简称**RISC**。

  早期的 x86 是 cisc 的代表，后来的发展中逐步引入了 risc 的部分理念，将内部指令的实现大量模块化，准确来说是一个 cisc 外加 risc 部分技术的架构。

## 3. 体系结构

不兼容的不同架构使用完全不同的指令集。

- **x86**

  x86 是一种中央处理器指令集架构，最早于 1978 年由 Intel 8086 推出。由于 Intel 8086 在 3 年后被 IBM PC 所选用，因此之后 x86 便成为了 PC 的标准平台，成为了历来最成功的 CPU 架构。

  现在的 x86 已经远远不是原先的 x86，就像第一辆大规模量产的汽车 Model T 和现在的特斯拉，都是汽车，表层有很多不同，但更深层次的改变却深埋在躯壳之下。从 8086 的大约 20000 个晶体管，到现在数十亿个晶体管，量变的同时也有着本质的变化。我们现在很难说现在的 X86 还是不是复制指令集，超长指令集被解析成微码，而微码引入了精简指令集的很多概念和优化，从而 RISC 和 CISC 不再是泾渭分明的两方，而是融合进入了 x86 的内心。L1、L2、L3 甚至 L4 cache 的引入，各种高速内部外部总线的发明，不断地给 x86 注入新鲜的动力。是的，x86 在生长，在演化，并在演化中焕发出勃勃的生机。

  助力 x86 持续保持成功的另一很重要的因素是兼容性。尽管 CPU Die 上大约 30% 的部分都要被用来保持向前兼容，成本巨大，但它的好处却怎么强调都不为过，甚至安腾处理器都要发明 x86 兼容模式。沉重的历史有时候是负担，但忽略巨大的惯性则是愚蠢的。x86 多年积累的巨大生态系统，让任何企图忽略它的人们都付出了惨重的代价，包括 Surface RT 和 x86 的主人自己发明的安腾。

- **EPIC(Explicitly Parallel Instruction Computers) / IA-64(Intel Architecture, 64-bit)**

  IA-64(Intel Architecture, 64-bit) 是 Intel 在向 64 位处理器过渡时期（x86-32与x86-64之间）与惠普合作推出的独立的处理器架构，并不属于 x86 指令集架构家族。IA-64 在很多方面来说，都比 x86 有了长足的进步。突破了传统 IA32 架构的许多限制，在数据的处理能力，系统的稳定性、安全性、可用性、可观理性等方面获得了突破性的提高。但其最大的缺陷是和 x86 架构完全不兼容，导致在已经被 x86 大量覆盖的市场中反响极差。

  典型产品：Intel Itanium（安腾）系列处理器等。

- **ARM**

  ARM 是 RISC 型指令集的典型代表。ARM 架构 CPU 主要用在移动处理器领域，如高通、博通、三星、苹果都拥有 ARM 架构的处理器。

- **MIPS**

  MIPS 是 RISC 型指令集的另一个典型代表，是一个学院派的 CPU 指令集架构，授权门槛极低，因此很多厂家都做 MIPS 或者 MIPS 衍生架构。MIPS 架构 CPU 主要用在嵌入式领域（如路由器），目前最活跃的 MIPS 是中国的龙芯，其 LOONGISA 架构其实是 MIPS 的扩展。

- **Power**

## 4. 指令格式

指令格式，则是指令字用二进制代码表示的结构形式，通常由操作码字段和地址码字段组成。其中，操作码字段表征指令的操作特性和功能，而地址码字段通常指定参与操作的操作数的地址。

### 4.1. 操作码

设计计算机时，对指令系统的每一条指令都要规定一个操作码。

指令的操作码OP表示该指令应进行什么性质的操作，如进行加法、减法、乘法、除法、取数、存数等等。不同的指令用操作码字段的不同编码来表示，每一种编码代表一种指令。**CPU中的专门电路用来解释每个操作码，因此机器就能执行操作码所表示的操作**。

组成操作码字段的位数一般取决于计算机指令系统的规模。较大的指令系统就需要更多的位数来表示每条特定的指令。一般来说，一个包含n位的操作码最多能够表示2^n条指令。

### 4.2. 地址码

根据一条指令中有几个操作数地址，可将该指令称为几操作数指令或几地址指令。
- 三地址指令
- 二地址指令
- 单地址指令
- 零地址指令

## 5. 指令周期

TODO:

## 6. Refer Links

[Wikipedia: x86](https://zh.wikipedia.org/wiki/X86)

[Intel 和 AMD 与 x86，ARM，MIPS 有什么区别？](https://www.zhihu.com/question/63627218)

[X86/X64的处理器和32/64位的系统有什么关系？](https://www.zhihu.com/question/47389187)
