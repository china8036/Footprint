- [Vim 模式](#vim-模式)
  - [1. 基本模式](#1-基本模式)
    - [1.1. 普通模式 (Normal mode)](#11-普通模式-normal-mode)
    - [1.2. 插入模式 (Insert mode)](#12-插入模式-insert-mode)
    - [1.3. 命令行模式 (Command-line mode)](#13-命令行模式-command-line-mode)
    - [1.4. 可视模式 (Visual mode)](#14-可视模式-visual-mode)
      - [1.4.1. 可视字符模式](#141-可视字符模式)
      - [1.4.2. 可视行模式](#142-可视行模式)
      - [1.4.3. 可视块模式](#143-可视块模式)
    - [1.5. 选择模式 (Select mode)](#15-选择模式-select-mode)
    - [1.6. Ex 模式 (Ex mode)](#16-ex-模式-ex-mode)
    - [1.7. Terminal-Job mode](#17-terminal-job-mode)
  - [2. 派生模式](#2-派生模式)
  - [3. Refer Links](#3-refer-links)

# Vim 模式

Vim 具有 6 种基本模式和 5 种派生模式，我们这里只简单介绍下 6 种基本模式，其中常用到的是普通模式、插入模式和命令行模式。

## 1. 基本模式

通过 `:h vim-modes-intro` 可以查看所有 7 种模式的介绍和说明。

### 1.1. 普通模式 (Normal mode)

Vim 启动后默认进入普通模式，处于插入模式或命令行模式时只需要按 `Esc` 或者 `Ctrl+[` 即可进入普通模式。

在普通模式中，用的编辑器命令，比如移动光标，删除文本等等。这也是 Vim 启动后的默认模式。这正好和许多新用户期待的操作方式相反（大多数编辑器默认模式为插入模式）。

**Vim 强大的编辑能来自于其普通模式命令，普通模式命令往往需要一个操作符结尾**。例如普通模式命令 dd 删除当前行，但是第一个"d"的后面可以跟另外的移动命令来代替第二个 d，比如用移动到下一行的"j"键就可以删除当前行和下一行。另外还可以指定命令重复次数，2dd（重复 dd 两次），和 dj 的效果是一样的。用户学习了各种各样的文本间移动／跳转的命令和其他的普通模式的编辑命令，并且能够灵活组合使用的话，能够比那些没有模式的编辑器更加高效地进行文本编辑。

### 1.2. 插入模式 (Insert mode)

在普通模式下使用下面的键将进入插入模式，并可以从相应的位置开始输入
- `i`	在当前光标前插入
- `a`	在当前光标后插入
- `I`	在当前光标行首插入，相当于 `^a`
- `A`	在当前光标行末插入，相当于 `$a`
- `o`	在当前光标所在行后插入一个新行
- `O`	在当前光标所在行前插入一个新行
- `s`/`ci` 删除特定内容并进入插入模式，见【删除】部分

在这个模式中，大多数按键都会向文本缓冲中插入文本。

在插入模式中，可以按 ESC 键回到普通模式。

在插入模式中，输入一个词的开头后，可以使用 `ctrl` + `p` 或 `ctrl` + `n` 自动补齐。

### 1.3. 命令行模式 (Command-line mode)

普通模式中按 `:` 即可进入命令行模式。

在命令行模式中可以输入会被解释成并执行的文本。例如执行命令（: 键），搜索（/ 和？键）或者过滤命令（! 键）。在命令执行之后，Vim 返回到命令行模式之前的模式，通常是普通模式。

在命令行模式下，有以下常用的快捷技巧：
- 使用 `tab` 键可自动补全命令
- 使用 `ctrl` + `d` 可显示所有可补全的命令
- `.` （小数点) 可以重复上一次的命令
- `N<command>` 重复某个命令 N 次
- `<start position><command><end position>` 将游标的移动和命令操作结合，如：
  - `0y$` 先到行头，然后拷贝到本行最后一个字符，相当于 `yy`
  - `ye` 从当前位置拷贝到本单词的最后一个字符
  - `y2/foo` 拷贝 2 个 “foo” 之间的字符串

常用命令：
- `:help` / `:h`: 查看帮助信息，可使用 `:h str` 在帮助信息中快速查找 str 字符串。
- `:version`: 查看版本信息。
- `:edit filename` / `:e filename`:
- `:set xxx`:

### 1.4. 可视模式 (Visual mode)

Vim 的可视模式允许我们选中一块文本区域，并且在上面进行操作。可视模式分为 3 种：
- 可视（面向字符）
- 可视块（面向列）
- 可视行（面向行）

#### 1.4.1. 可视字符模式

普通模式下按 `v` 即进入可视字符模式。

这个模式与普通模式比较相似，但是移动游标可批量选择文本，并且被选择的文本区域会呈现高亮。高亮区域可以是字符、行或者是一块文本。当执行一个非移动命令时，命令会被执行到这块高亮的区域上。Vim 的"文本对象"也能和移动命令一样用在这个模式中。

在当前模式下，除了移动光标逐个字符进行选择外，还可以使用区域选择：`v<object>`
- object 可能是： w 一个单词， W 一个以空格为分隔的单词， s 一个句字， p 一个段落。也可以是一个特别的字符："、 '、 )、 }、 ]。

选了某一区域后，可进行如下操作：
- J 把所有的行连接起来（变成一行）
- **< 或 > 左右缩进**
- **= 自动缩进**

#### 1.4.2. 可视行模式

普通模式下按 `V` 即进入可视行模式。

#### 1.4.3. 可视块模式

（可视块）批量列操作
- `Ctrl` + `v` 进入（可视块）列选择、模式
- `shift` + `i` 进入插入模式
- 输入字符串
- `ESC`

### 1.5. 选择模式 (Select mode)

这个模式和无模式编辑器的行为比较相似（Windows 标准文本控件的方式）。这个模式中，可以用鼠标或者光标键高亮选择文本，不过输入任何字符的话，Vim 会用这个字符替换选择的高亮文本块，并且自动进入插入模式。

### 1.6. Ex 模式 (Ex mode)

这和命令行模式比较相似，在使用 `:visual` 命令离开 Ex 模式前，可以一次执行多条命令。

### 1.7. Terminal-Job mode

## 2. 派生模式

## 3. Refer Links
